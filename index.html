<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Candle Drill - Free Zoom</title>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* 1. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠: ‡∏ï‡∏±‡∏î‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏¥‡πâ‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤ */
    body { 
        background: #222; margin: 0; padding: 0; 
        font-family: 'Sarabun', sans-serif; 
        width: 100vw; height: 100vh; height: 100dvh; 
        overflow: hidden; /* ‚õî ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ Scrollbar ‡πÄ‡∏î‡πá‡∏î‡∏Ç‡∏≤‡∏î */
        touch-action: none; /* ‚õî ‡∏´‡πâ‡∏≤‡∏° Browser ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏¢‡∏∏‡πà‡∏á (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!) */
    }

    /* 2. ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü: ‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡πÑ‡∏õ‡πÄ‡∏•‡∏¢ */
    #game-container { 
        position: absolute; top: 0; left: 0; 
        width: 100%; height: 100%; 
        background: #333; 
        cursor: grab;
    }
    #game-container:active { cursor: grabbing; }

    /* Canvas ‡∏à‡∏∞‡∏ß‡∏≤‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠ */
    canvas { display: block; width: 100%; height: 100%; }

    /* 3. ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏•‡∏≠‡∏¢ (Floating Control) */
    #control-area { 
        position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
        width: 90%; max-width: 450px;
        background: rgba(30,35,41,0.95); backdrop-filter: blur(10px);
        border: 1px solid #fcd535; border-radius: 20px;
        padding: 15px; z-index: 100;
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        display: flex; flex-direction: column; align-items: center; gap: 10px;
        pointer-events: auto; /* ‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ */
    }

    .question-text { 
        font-size: 16px; font-weight: bold; color: #fff; 
        margin: 0; text-align: center; text-shadow: 0 1px 2px black;
    }

    #choice-container { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
    .choice-btn {
        width: 45px; height: 45px;
        background: #333; color: #fcd535;
        border: 2px solid #fcd535; border-radius: 50%;
        font-size: 18px; font-weight: bold; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
        transition: 0.2s;
    }
    .choice-btn:active { transform: scale(0.9); background: #fcd535; color: #000; }
    
    .btn-correct { background: #28a745 !important; color: white !important; border-color: #28a745 !important; }
    .btn-wrong { background: #dc3545 !important; color: white !important; border-color: #dc3545 !important; opacity: 0.5; }

    /* ‡∏õ‡∏∏‡πà‡∏°‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏°‡∏∏‡∏°‡∏°‡∏≠‡∏á (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏ã‡∏π‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠) */
    .reset-btn {
        position: absolute; top: 15px; right: 15px;
        background: rgba(0,0,0,0.6); color: white; border: 1px solid #555;
        padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px;
        z-index: 200;
    }

    #end-screen {
        display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.9); z-index: 9999;
        flex-direction: column; align-items: center; justify-content: center; color: white;
    }
  </style>
</head>
<body>

<div id="game-container">
    <canvas id="quizCanvas"></canvas>
    <button class="reset-btn" onclick="resetView()">üîÑ Reset View</button>
</div>

<div id="control-area">
    <div id="questionText" class="question-text">Loading...</div>
    <div id="choice-container"></div>
</div>

<div id="end-screen">
    <h1>üéâ ‡∏à‡∏ö‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î!</h1>
    <button onclick="location.href='dashboard.html'" style="padding:10px 20px; font-size:18px; border-radius:50px; cursor:pointer;">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
</div>

<script>
// ==========================================
// 1. üìÇ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏à‡∏ó‡∏¢‡πå
// ==========================================
const steps = [
  {
    "image": "candle1.png", 
    "question": "‡∏à‡∏≤‡∏Å STO OB ‡πÇ‡∏ã‡∏ô‡∏™‡∏µ‡∏™‡πâ‡∏° ‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡∏±‡∏ß",
    "choices": [
       { "x": 1137, "y": 171, "w": 14, "h": 38 },
       { "x": 1146, "y": 160, "w": 15, "h": 29 },
       { "x": 1159, "y": 166, "w": 15, "h": 48 },
       { "x": 1168, "y": 200, "w": 16, "h": 41 }
    ],
    "correctIndex": 3  
  }
];

// ==========================================
// 2. ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏° Engine (Canvas Camera)
// ==========================================
const canvas = document.getElementById('quizCanvas');
const ctx = canvas.getContext('2d');
const bgImage = new Image(); // ‡∏™‡∏£‡πâ‡∏≤‡∏á Image Object ‡∏£‡∏≠‡πÑ‡∏ß‡πâ‡πÄ‡∏•‡∏¢
const container = document.getElementById('game-container');
const choiceContainer = document.getElementById('choice-container');

let currentStepIdx = 0;

// üì∏ Camera State (‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á)
let camera = { x: 0, y: 0, z: 1 }; 
let isDragging = false;
let startPan = { x: 0, y: 0 };
let lastZoomCenter = { x: 0, y: 0 };

// Touch State
let initialPinchDist = null;
let lastCameraZ = 1;

window.onload = function() { loadStep(); };
window.addEventListener('resize', () => { 
    fitToScreen(); 
    draw(); 
});

function loadStep() {
    if(currentStepIdx >= steps.length) {
        document.getElementById('end-screen').style.display = 'flex';
        return;
    }
    const s = steps[currentStepIdx];
    document.getElementById('questionText').innerText = `‡∏Ç‡πâ‡∏≠ ${currentStepIdx + 1}: ${s.question}`;
    
    choiceContainer.innerHTML = "";
    s.choices.forEach((_, index) => {
        const btn = document.createElement("div");
        btn.className = "choice-btn";
        btn.innerText = index + 1;
        btn.onclick = () => checkAnswer(index, btn);
        choiceContainer.appendChild(btn);
    });

    bgImage.src = s.image;
    bgImage.onload = function() { 
        resetView(); // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏à‡∏≠‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡πÉ‡∏´‡∏°‡πà
    }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏†‡∏≤‡∏û‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°
function fitToScreen() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    if(!bgImage.complete) return;

    // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Scale ‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏à‡∏≠ (Fit Contain)
    const scaleW = canvas.width / bgImage.naturalWidth;
    const scaleH = canvas.height / bgImage.naturalHeight;
    const scale = Math.min(scaleW, scaleH) * 0.9; // *0.9 ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ç‡∏≠‡∏ö‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢

    camera.z = scale;
    // ‡∏à‡∏±‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á
    camera.x = (canvas.width - bgImage.naturalWidth * scale) / 2;
    camera.y = (canvas.height - bgImage.naturalHeight * scale) / 2;
}

function resetView() {
    fitToScreen();
    draw();
}

// ==========================================
// üñêÔ∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™ (Touch Logic - ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
// ==========================================
container.addEventListener('touchstart', handleTouchStart, { passive: false });
container.addEventListener('touchmove', handleTouchMove, { passive: false });
container.addEventListener('touchend', handleTouchEnd);

// ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Mouse (‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏™‡πÉ‡∏ô‡∏Ñ‡∏≠‡∏°)
container.addEventListener('mousedown', handleMouseDown);
container.addEventListener('mousemove', handleMouseMove);
container.addEventListener('mouseup', handleMouseUp);
container.addEventListener('wheel', handleWheel, { passive: false });

function handleTouchStart(e) {
    if(e.touches.length === 1) {
        // 1 ‡∏ô‡∏¥‡πâ‡∏ß = ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏≤‡∏Å (Pan)
        isDragging = true;
        startPan = { x: e.touches[0].clientX - camera.x, y: e.touches[0].clientY - camera.y };
    } else if (e.touches.length === 2) {
        // 2 ‡∏ô‡∏¥‡πâ‡∏ß = ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ã‡∏π‡∏° (Pinch)
        isDragging = false; // ‡∏´‡∏¢‡∏∏‡∏î‡∏•‡∏≤‡∏Å‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
        initialPinchDist = getPinchDist(e);
        lastCameraZ = camera.z;
        // ‡∏´‡∏≤‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡∏ô‡∏¥‡πâ‡∏ß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡∏π‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤‡∏°‡∏±‡∏ô
        lastZoomCenter = getPinchCenter(e); 
    }
}

function handleTouchMove(e) {
    e.preventDefault(); // ‚õî ‡∏´‡πâ‡∏≤‡∏° Safari ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≠
    
    if(e.touches.length === 1 && isDragging) {
        // ‡∏•‡∏≤‡∏Å (Pan)
        camera.x = e.touches[0].clientX - startPan.x;
        camera.y = e.touches[0].clientY - startPan.y;
        draw();
    } else if (e.touches.length === 2 && initialPinchDist) {
        // ‡∏ã‡∏π‡∏° (Pinch Zoom)
        const currentDist = getPinchDist(e);
        const zoomFactor = currentDist / initialPinchDist;
        
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Zoom ‡πÉ‡∏´‡∏°‡πà
        const newZoom = lastCameraZ * zoomFactor;
        
        // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ã‡∏π‡∏° (‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏•‡πá‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ)
        if (newZoom > 0.1 && newZoom < 5) {
            // ‡∏™‡∏π‡∏ï‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Zoom Towards Point (‡∏¢‡∏≤‡∏Å‡∏ô‡∏¥‡∏î‡∏ô‡∏∂‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∑‡πà‡∏ô)
            // 1. ‡∏´‡∏≤‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏°‡∏≤‡∏™‡πå‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÇ‡∏•‡∏Å‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ã‡∏π‡∏°
            const worldX = (lastZoomCenter.x - camera.x) / camera.z;
            const worldY = (lastZoomCenter.y - camera.y) / camera.z;
            
            // 2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Zoom
            camera.z = newZoom;
            
            // 3. ‡∏õ‡∏£‡∏±‡∏ö camera.x,y ‡∏Å‡∏•‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°
            // (‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å world coordinate)
            const newCenter = getPinchCenter(e); // ‡∏à‡∏∏‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏ô‡∏¥‡πâ‡∏ß‡∏≠‡∏≤‡∏à‡∏Ç‡∏¢‡∏±‡∏ö
            camera.x = newCenter.x - worldX * camera.z;
            camera.y = newCenter.y - worldY * camera.z;
            
            draw();
        }
    }
}

function handleTouchEnd(e) {
    isDragging = false;
    if (e.touches.length < 2) {
        initialPinchDist = null;
    }
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏ô‡∏¥‡πâ‡∏ß (Pythagoras)
function getPinchDist(e) {
    return Math.hypot(
        e.touches[0].clientX - e.touches[1].clientX,
        e.touches[0].clientY - e.touches[1].clientY
    );
}
// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏∏‡∏î‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡∏ô‡∏¥‡πâ‡∏ß
function getPinchCenter(e) {
    return {
        x: (e.touches[0].clientX + e.touches[1].clientX) / 2,
        y: (e.touches[0].clientY + e.touches[1].clientY) / 2
    };
}

// --- Mouse Events (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PC) ---
function handleMouseDown(e) {
    isDragging = true;
    startPan = { x: e.clientX - camera.x, y: e.clientY - camera.y };
}
function handleMouseMove(e) {
    if (!isDragging) return;
    camera.x = e.clientX - startPan.x;
    camera.y = e.clientY - startPan.y;
    draw();
}
function handleMouseUp() { isDragging = false; }
function handleWheel(e) {
    e.preventDefault();
    const zoomIntensity = 0.1;
    const scroll = e.deltaY < 0 ? 1 : -1;
    const zoomFactor = Math.exp(scroll * zoomIntensity);
    
    const newZoom = camera.z * zoomFactor;
    if (newZoom < 0.1 || newZoom > 5) return;

    // Zoom Towards Mouse Position
    const mouseX = e.clientX;
    const mouseY = e.clientY;
    const worldX = (mouseX - camera.x) / camera.z;
    const worldY = (mouseY - camera.y) / camera.z;

    camera.z = newZoom;
    camera.x = mouseX - worldX * camera.z;
    camera.y = mouseY - worldY * camera.z;
    
    draw();
}

// ==========================================
// üé® ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ (‡∏ß‡∏≤‡∏î‡∏ï‡∏≤‡∏°‡∏°‡∏∏‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á)
// ==========================================
function draw() {
    // 1. ‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // 2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏î‡∏¥‡∏°‡πÑ‡∏ß‡πâ
    ctx.save();
    
    // 3. ‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏•‡πâ‡∏≠‡∏á (Transform Matrix)
    ctx.translate(camera.x, camera.y);
    ctx.scale(camera.z, camera.z);

    // 4. ‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ Background
    if(bgImage.complete) {
        ctx.drawImage(bgImage, 0, 0);
    }

    // 5. ‡∏ß‡∏≤‡∏î‡∏´‡∏°‡∏∏‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ (‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏Ç‡∏¢‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥!)
    const s = steps[currentStepIdx];
    s.choices.forEach((box, index) => {
        const centerX = box.x + (box.w / 2);
        
        // Logic ‡πÅ‡∏¢‡∏Å‡∏ö‡∏ô‡∏•‡πà‡∏≤‡∏á (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°)
        const isTop = (index % 2 === 0); 
        const gap = isTop ? 50 : 35; 
        
        let pinY, targetY; 
        if (isTop) { targetY = box.y; pinY = targetY - gap; } 
        else { targetY = box.y + box.h; pinY = targetY + gap; }

        ctx.beginPath(); ctx.moveTo(centerX, pinY); ctx.lineTo(centerX, targetY); 
        ctx.lineWidth = 1.5; ctx.strokeStyle = "#fcd535"; ctx.stroke(); // ‡πÄ‡∏™‡πâ‡∏ô‡∏à‡∏∞‡∏´‡∏ô‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ã‡∏π‡∏° (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏´‡∏ô‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏£ camera.z)

        ctx.beginPath(); ctx.arc(centerX, pinY, 11, 0, 2 * Math.PI); 
        ctx.fillStyle = "#1e2329"; ctx.fill();
        ctx.lineWidth = 1.5; ctx.strokeStyle = "#fcd535"; ctx.stroke();

        ctx.fillStyle = "#fcd535"; ctx.font = "bold 13px Arial"; 
        ctx.textAlign = "center"; ctx.textBaseline = "middle";
        // ‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏•‡∏±‡∏ö Text ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏±‡∏ß (‡∏Å‡∏£‡∏ì‡∏µ‡∏ã‡∏π‡∏°‡πÅ‡∏õ‡∏•‡∏Å‡πÜ) ‡πÅ‡∏ï‡πà scale ‡∏õ‡∏Å‡∏ï‡∏¥‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏Å‡πâ
        ctx.fillText(index + 1, centerX, pinY + 1); 
    });

    // 6. ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏î Restore ‡∏Å‡∏•‡∏±‡∏ö
    ctx.restore();
}

function checkAnswer(selectedIndex, btnElement) {
    const s = steps[currentStepIdx];
    if(selectedIndex === s.correctIndex) {
        btnElement.classList.add("btn-correct");
        setTimeout(() => { currentStepIdx++; loadStep(); }, 800);
    } else {
        btnElement.classList.add("btn-wrong");
    }
}
</script>
</body>
</html>
